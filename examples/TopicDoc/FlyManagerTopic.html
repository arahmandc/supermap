<!DOCTYPE html>
<html>
     <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <title>Fly Manager Introduction</title>
        <link href='../css/bootstrap.min.css' rel='stylesheet' />
        <link href='../css/bootstrap-responsive.min.css' rel='stylesheet' />
         <link href='../css/sm-extend.css' rel='stylesheet' />
        <link href='../css/sm-doc.css' rel='stylesheet' />
        <!--[if lte IE 8]>
        <style>
        .container .hero-unit{
                padding: 60px 400px 60px 60px;
                background-image:url(./examples/images/home_banner2.png);
                background-repeat:no-repeat;
                background-position-x:right;
                background-position-y:bottom;
            }
        </style>
        <![endif]-->
		<!-- <style>
			.back2top-icon-real{
				background:transparent url(a.png) no-repeat fixed bottom right;
				width:57px;
				height:57px;
			}
		</style> -->

        <style type="text/css">
<!--
.STYLE1 {color: #FF0000}
.STYLE2 {
	color: #0080C0;
	font-weight: bold;
}
-->
        </style>
</head>

     <!--导航条-->
     <div class="navbar navbar-fixed-top" id="navbar">

     </div>
     <div id='container' class='container'>
         <div class='page-header'>
             <h1>Fly Manager Introduction</h1>
             <hr/>
             <h2>1. Overview</h2>
             <p>SuperMap iClient3D for WebGL provides a module for flying management which is used to manage flying operations in the 3D scene.</p>
             <ul style="list-style-type:disc;">
                 <li>Description: The Fly Manager Module reads the file fpf which is generated by SuperMap iDesktop for defining flying routes and stops.</li>
                 <li>User Scenario: Fly Manager is applicable for viewing 3D scene and browsing related introduction of the POIs. The visibility is impressive, and user experience is smooth.</li>
             </ul>
             <h2>2. How to Use</h2>
             <h4>a. Generate a fpf file</h4>
             <p>
                 You should use SuperMap iDesktop to generate the fpf file by editing each stop (including latitude and longitude, elevation, camera heading pitch roll, waiting time of stop, speed, etc.).
             </p>

             <h4>b. Create a route collection object</h4>
             <p></p>
             <p>
             </p>
             <p>
        <pre>
            var routes = new Cesium.RouteCollection();
        </pre>
             </p>

             <h4>c. Load the fpf file</h4>
             <p></p>
             <p>
             </p>
             <p>
        <pre>
            routes.fromFile(url);
        </pre>
             </p>


             <h4>d. Create a FlyManager object</h4>
             <p></p>
             <p>
             </p>
             <p>
        <pre>
            var flyManager = new Cesium.FlyManager(scene,routes);
        </pre>
             </p>

             <h4>e. Add an EventListener for monitoring the arrival to the stop if necessary</h4>
             <p></p>
             <p>
             </p>
             <p>
        <pre>
            flyManager.stopArrived.addEventListener(function(routeStop){
		            //to do
                    //Note: routeStop.promise is used to process it if the activation of the arrival to the stop adopts asynchronous mechanism. e.g., play music:
                    audio.play();
                    var defer = Cesium.when.defer();
                    routeStop.promise = defer;
                    audio.onended = function(){
                        defer.resolve(true);
                        routeStop.promise = undefined;
                    };
                    //Execute in order if it is a synchronous event
            });
        </pre>
             </p>

             <h4>f. Start flying</h4>
             <p></p>
             <p>
                 The camera starts flying in accordance with the preset parameters of each stop. Every stop can have different speeds and camera parameters. There are two modes of flying: constant time fly and constant speed fly.
                 Constant time mode: the flying time interval between the neighboring two stops is the same, 10 seconds by default.
                 Constant speed mode: the camera flies at a constant speed during the whole route. The speed can be either set by the fpf file or adjusted timely on the way.
             </p>
             <p>
        <pre>
            flyManager.play();
        </pre>
             </p>

             <h4>g. Pause</h4>
             <p></p>
             <p>
                 The camera can pause at any time during the fly. Execute flyManager.play() to start flying again at the place where the camera stops.
             </p>
             <p>
        <pre>
             flyManager.pause();
        </pre>
             </p>

             <h4>h. Stop</h4>
             <p></p>
             <p>
                 The camera can stop at any time during the fly. Execute flyManager.stop() to start flying again at the place where the camera stops.
             </p>
             <p>
        <pre>
             flyManager.stop();
        </pre>
             </p>
             <p>The effect of the fly is shown as follows:</p>
             <div class="pageImage">
                 <img src="../images/TopicDOC/fly.gif">
             </div>
         </div>
         <div class='footer'>
             <p>Copyright&nbsp;&copy; 2000-2017 &nbsp;SuperMap Software Co., Ltd.</p>
         </div>
     </div>
     <script src='../js/jquery.js'></script>
     <script src='../js/bootstrap.js'></script>
     <script src="../js/navbar.js"></script>
     </body>
</html>
